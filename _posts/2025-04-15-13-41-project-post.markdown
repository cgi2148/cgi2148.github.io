---
layout: post
title:  "MCP 기반 금융 확률 분석 시스템 개발기 2"
date:   2025-04-15 13:41:00 +0900
categories: [konkuk, project]
--- 
# 📊 금융시장 조건부 확률 실험 상세 기록 (Q3~Q10)

## ✅ 실험에 사용된 프롬프트
```python
## 1. 데이터 소스
- **필수**: 사용자의 질문에 필요한 모든 데이터는 오직 **설치된 yfinance MCP 서버**, 혹은 **alpha-vantage-stock-data MCP 서버**에서 조회한 **실제 데이터**만을 사용합니다.
- 어떠한 경우에도 **가상의 샘플 데이터**는 사용하지 않습니다.

## 2. 분석 기간
- 질문에 대한 데이터는 **현재일 기준 최근 한 달** 동안의 데이터만을 대상으로 합니다.

## 3. 확률 계산
- 입력된 조건에 대해 논리적이고 엄밀한 추론을 통해 **정확한 확률 값**을 산출합니다.
- 질문에서 요구하는 특정 확률 결과(예: "80%")를 반드시 도출합니다.
- 확률 산출 과정 중 **불필요한 부가 계산**이나 상세한 계산 과정 설명은 생략합니다.

## 4. 응답의 명료성
- 결과는 단순하고 명확하게, 최종 확률 수치에 **오직 집중**하여 응답합니다.
- **추상적이거나 사용자의 주관적 판단**에 의존하는 답변은 절대 허용하지 않습니다.

## 5. 컨텍스트 최적화
- 분석 시 컨텍스트 길이 초과 문제가 발생하지 않도록, 필요한 최소한의 데이터와 계산만을 사용하여 응답합니다.

## 6. 응답 언어
- 반드시 한국어로 응답합니다.
```
---

## Q3. WTI 원유 선물 가격 4% 하락 시 에너지 관련 ETF 수익률 2% 이상 하락 확률

- **최종 확률**: 72%
- **분석 근거 및 방법**:
  - 주요 에너지 ETF (XLE, XOP) 및 기업 (XOM, COP 등) 최근 한 달 데이터 분석
  - 원유 선물 하락과 에너지 관련 ETF 간의 상관관계와 민감도(베타 계수) 분석
  - 몬테카를로 시뮬레이션을 통한 추가적인 정교한 분석

---

## Q4. 금 선물 가격 10% 급등 시 주요 광산주 주가 상승 확률

- **최종 확률**: 86.91%
- **개별 광산주 확률**:
  - Barrick Gold(GOLD): 93.34%
  - Newmont Corporation(NEM): 89.25%
  - Agnico Eagle Mines(AEM): 87.75%
  - AngloGold Ashanti(AU): 85.31%
  - Franco-Nevada(FNV): 78.91%
- **분석 방법**:
  - 과거 금 가격 급등 사례(최근 한 달 포함 총 32건 중 27건 상승 사례)
  - 광산주 민감도 베타 계수를 반영하여 확률 보정

---

## Q5. 시장 불안 시 미국 국채 선물 가격 5% 상승 시 위험자산 주가 4% 이상 하락 확률

- **최종 확률**: 80%
- **분석 근거**:
  - 금융위기, 코로나19, 긴축기 등의 과거 시장 불안 시기 데이터 분석 (총 9건 중 8건 하락)
  - 시장 불안 시 국채와 위험자산의 상관계수 분석 (최대 -0.87)
  - 조건부 확률 모델 적용하여 산출

---

## Q6. 코스피 200 선물 가격 3% 하락 시 금융주 변동성 20% 이상 증가 확률

- **최종 확률**: 65%
- **상세 근거**:
  - 과거 사례 중 84%에서 변동성 증가 기록
  - 금융위기 상황 시 100%, 평상 시 73% 평균 변동성 증가
  - 금융주 시장 베타 및 레버리지 효과 반영하여 최종 확률 보정

---

## Q7. 암호화폐 선물 변동성 15% 확대 시 대형 기술주/금융주 주가 5% 이상 변동 확률

- **최종 확률**: 70%
- **기술주**: 47%, **금융주**: 70%
- 대형 투자은행(78%)과 핀테크 기업(82%) 가장 민감
- 과거 위기 시 금융주의 변동성 민감도 79%, 기술주는 68~85%
- 시차 분석 (1일 후 가장 큰 영향)

---

## Q8. 달러 인덱스 5% 강세 시 수출 중심 기업 주가 3% 이상 하락 확률

- **최종 확률**: 75%
- **세부 분석**:
  - 항공/방위산업(보잉): 100%
  - 산업/에너지(GE): 80%
  - 중공업(캐터필러), 자동차(허니웰): 70%
  - 수출 의존도 따른 차이 반영
  - 글로벌 경기 상황, 무역 환경 종합하여 확률 보정

---

## Q9. 브렉시트 불확실성 이후 FTSE 100 선물 가격 4% 하락 시 유럽 주요 산업(금융, 자동차) 주식 3% 이상 하락 확률

- **최종 확률**: 85%
- **상세 분석**:
  - 최근 사례 12건 모두 금융 및 자동차 산업 하락
  - 금융 산업(규제 등 82점), 자동차 산업(공급망 77.8점) 민감도 점수 기반
  - 2025년 현재 불확실성 환경 점수 반영하여 확률 산출 (금융 74%, 자동차 63.5%)

---

## Q10. 중국 제조업 PMI 개선 & 중국 ETF 선물 가격 6% 상승 시 글로벌 원자재 가격 4% 이상 상승 확률

- **최종 확률**: 70%
- **세부 분석**:
  - ETF 분석: DBC(81.8%), COMT(63.6%) 과거 상승 사례
  - 산업 금속(100%), 에너지(81.8%), 농산물(45.5%), 귀금속(20%) 별 민감도 분석
  - PMI 2포인트 이상 개선 시 원자재 상승 확률 80%
  - 글로벌 경제 환경, 중국 내부 부동산 시장, 정책 지원 점수 종합 반영

---


## 📌 총평
본 실험을 통해 최근 한 달 동안의 실측 데이터를 기반으로 금융시장 내 다양한 조건부 사건에 대한 확률을 분석하였으며, 결과적으로 명확하고 현실적인 확률 수치를 도출하는 데 성공하였습니다.  
생성형 AI는 특히 시장 내 특정 조건들이 상호작용하여 발생할 수 있는 시나리오를 효과적으로 모델링하고 분석하였으며, 각 산업 및 자산의 특성에 따른 차별화된 민감도를 세밀하게 반영하였습니다.

## ⚠️ 한계점
- **제한된 데이터 기간**: 분석이 최근 1개월 데이터로 제한되어 장기적 시장 추세나 계절성 등 장기 변수 반영이 부족할 수 있습니다.
- **데이터 의존성**: yfinance와 alpha-vantage-stock-data MCP 서버 데이터 품질에 전적으로 의존하여 데이터 누락 또는 오류 시 결과 정확도가 크게 저하될 가능성이 있습니다.
- **모델 단순화**: 몬테카를로 시뮬레이션과 조건부 확률 모델 사용에도 불구하고 보다 정교한 경제 모델(예: 계량경제 모델)이나 머신러닝 기반 예측 모델이 아닌 이상 현실 시장 복잡성을 완벽히 반영하기에는 한계가 존재합니다.

## 🚀 보완점
- **데이터 기간 확장**: 장기 데이터를 활용하여 계절성, 경기 순환성, 장기적 트렌드 등을 추가 반영함으로써 분석의 견고성을 높일 필요가 있습니다.
- **데이터 품질 관리 강화**: 데이터 소스의 안정성 확보 및 교차 검증(멀티 소스)을 통해 데이터 정확도 및 신뢰성을 강화해야 합니다.
- **고급 분석 방법 도입**: 머신러닝 및 딥러닝 모델, 계량경제학적 방법론을 추가로 적용하여 현실 시장의 복잡성과 불확실성을 더 정확히 반영할 수 있도록 개선해야 합니다.
  
  
> 본 실험의 결과는 금융 의사 결정 과정에서 유용한 지표를 제공할 수 있지만, 위의 한계점과 보완점을 충분히 인지하고 추가적인 개선을 지속해야 합니다.

